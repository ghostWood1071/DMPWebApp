
@{
    ViewBag.Title = "Thống kê cấp dưới";
}
@section css{
    <link rel="stylesheet" href="~/Assets/vendor/morris/morris.css" />
    <style>
        #bar-chart {
            min-height: 250px;
        }

        .row.position h3 {
            font-weight: bold;
            margin: 0px;
            font-size: 30px;
        }

        .row.position h4 {
            font-size: 16px;
            font-weight: 600;
            text-align: center;
            margin: 15px 0px;
        }

        .row.position .col-md-3 {
            color: #101412;
            font-weight: bold;
            height: 129px;
            padding: 15px;
            box-sizing: border-box;
            border: 15px solid whitesmoke;
        }

        .col-md-3.tvtc {
            background-color: #f4a53d;
        }

        .col-md-3.tpkv {
            background-color: #69c0c0;
        }
        .col-md-3.tv300 {
            background: plum;
        }
        .col-md-3.gdkv {
            background-color: #5685e3;
        }

        .col-md-3.tv {
            background-color: yellowgreen;
        }

        .col-md-3.tpdb {
            background-color: burlywood;
        }

        .boxcontent {
            background-color: whitesmoke;
            padding: 10px 0px;
            margin: 20px 0px;
            border-radius: 5px;
        }

        .row.position {
            margin-left: 0px !important;
            margin-right: 0px !important;
        }
        .morris-chart text {
            fill: #343434;
            font-weight: 700 !important;
        }
    </style>
}
<section role="main" class="content-body">
    <header class="page-header">
        <h2>Thống kê cấp dưới</h2>

        <div class="right-wrapper pull-right">
            <ol class="breadcrumbs">
                <li>
                    <a href="index.html">
                        <i class="fa fa-home"></i>
                    </a>
                </li>
                <li><span>Thống kê cấp dưới</span></li>
            </ol>

            <a class="sidebar-right-toggle" data-open="sidebar-right"><i class="fa fa-chevron-left"></i></a>
        </div>
    </header>

    <!-- start: page -->
    <div class="boxcontent">
        <div class="row position">
            <div class="col-md-3 tvtc"><h3 class="text-center" id="pos1">0</h3><h4>Trưởng phòng</h4></div>
            <div class="col-md-3 tpkv"><h3 class="text-center" id="pos2">0</h3><h4>Trưởng phòng dự bị</h4></div>
            <div class="col-md-3 gdkv"><h3 class="text-center" id="pos3">0</h3><h4>Trưởng nhóm</h4></div>
            <div class="col-md-3 tv"><h3 class="text-center" id="pos4">0</h3><h4>Thành viên ĐC</h4></div>
        </div>
        <div class="row position">
            <div class="col-md-3 tpdb"><h3 class="text-center" id="pos5">0</h3><h4>Thành viên TC</h4></div>
            <div class="col-md-3 tv300"><h3 class="text-center" id="pos6">0</h3><h4>Thành viên 300Đ</h4></div>
            <div class="col-md-3 tv"><h3 class="text-center" id="pos7">0</h3><h4>Thành viên</h4></div>
        </div>
    </div>
    <div class="boxcontent">
        <h3 class="text-primary text-center" style="font-weight: 600;">
            Thống kê theo cấp bậc
        </h3>
        <div class="row">
            <div class="col-sm-12 text-center">
                <div id="bar-chart" class="morris-chart"></div>
            </div>
            <!-- end: page -->
        </div>
    </div>
</section>
@section script{

    <script src="~/Assets/vendor/raphael/raphael.js"></script>
    <script src="~/Assets/vendor/morris/morris.js"></script>
    <script>
        var id = sessionStorage.getItem("userID");
        $.get(`http://localhost:57133/ReportMemberQuantityByLevel?id=${id}`).done(
            function (res) {
                var level = res[0]
                var data = [
                    { y: 'TV cấp 1', a: level.Level1 },
                    { y: 'TV cấp 2', a: level.Level2 },
                    { y: 'TV cấp 3', a: level.Level3 },
                    { y: 'TV cấp 4', a: level.Level4 },
                    { y: 'TV cấp 5', a: level.Level5 },
                    { y: 'TV cấp 6', a: level.Level6 },
                    { y: 'TV cấp 7', a: level.Level7 },
                    { y: 'TV cấp 8', a: level.Level8 },
                    { y: 'TV cấp 9', a: level.Level9 },
                    { y: 'TV cấp 10', a: level.Level10 }
                ]
                config = {
                    data: data,
                    xLabelMargin: 1,
                    xkey: 'y',
                    ykeys: 'a',
                    barSizeRatio: 0.4,
                    labels: ['Số lượng', 'Total Outcome'],
                    fillOpacity: 0.9,
                    hideHover: 'auto',
                    behaveLikeLine: true,
                    resize: true,
                    pointFillColors: ['#ffffff'],
                    pointStrokeColors: ['black'],
                    lineColors: ['gray', 'red'],
                    yLabelFormat: function (y) {
                        return y = Math.round(y);
                    }
                };
                config.element = 'bar-chart';
                Morris.Bar(config);
            })
        $.get(`http://api.duocmyphamhaiduong.com//ReportMemberQuantityByPosition?id=${id}`).done(
            function (res) {
                data = res[0];
                $('#pos1')[0].textContent = data.TruongPhong
                $('#pos2')[0].textContent = data.TruongPhongDuBi
                $('#pos3')[0].textContent = data.TruongNhom
                $('#pos4')[0].textContent = data.ThanhVienDC
                $('#pos5')[0].textContent = data.ThanhVienTC
                $('#pos6')[0].textContent = data.ThanhVien300
                $('#pos7')[0].textContent = data.ThanhVien
                console.log(data);
            })
    </script>
}

