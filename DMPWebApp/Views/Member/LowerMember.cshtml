@{
    ViewBag.Title = "Danh sách cấp dưới";
}

@section css{
    <link href="~/Assets/stylesheets/lowermember.css" rel="stylesheet" />
}

<section role="main" class="content-body">
    <header class="page-header">
        <h2>Danh sách cấp dưới</h2>

        <div class="right-wrapper pull-right">
            <ol class="breadcrumbs">
                <li>
                    <a href="index.html">
                        <i class="fa fa-home"></i>
                    </a>
                </li>
                <li><span>Danh sách cấp dưới</span></li>
            </ol>

            <a class="sidebar-right-toggle" data-open="sidebar-right"><i class="fa fa-chevron-left"></i></a>
        </div>
    </header>

    <!-- start: page -->
    <section class="panel">
        <header class="panel-heading">
            <div class="panel-actions">
                <a href="#" class="fa fa-caret-down"></a>
                <a href="#" class="fa fa-times"></a>
            </div>
            <h2 class="panel-title">Danh sách cấp dưới <span>Số lượng: 6 cấp dưới</span></h2>
        </header>
        <div class="panel-body">
            <table class="table table-bordered table-striped mb-none" id="datatable-details">
                <thead>
                    <tr>
                        <th>Mã thành viên</th>
                        <th>Họ tên</th>
                        <th>Giới tính</th>
                        <th>Ngày sinh</th>

                        <th>Vị trí</th>
                        <th>Điện thoại</th>
                        <th>Địa chỉ</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="gradeA">
                        <td>TV000002</td>
                        <td>Nguyễn Hữu Lộc</td>
                        <td>Nam</td>
                        <td>19/05/1988</td>

                        <td>Thành viên tích cực</td>
                        <td>0983794729</td>
                        <td>Thanh Hà, Hải Dương</td>
                    </tr>
                    <tr class="gradeA">
                        <td>TV000003</td>
                        <td>Nguyễn Văn Đa</td>
                        <td>Nam</td>
                        <td>04/01/1999</td>

                        <td>Thành viên</td>
                        <td>0973894712</td>
                        <td>Kim Thành, Hải Dương</td>
                    </tr>
                    <tr class="gradeA">
                        <td>TV000004</td>
                        <td>Ngô Mai Anh</td>
                        <td>Nữ</td>
                        <td>12/11/1992</td>

                        <td>Thành viên</td>
                        <td>0976943500</td>
                        <td>Thanh Miện, Hải Dương</td>
                    </tr>
                    <tr class="gradeA">
                        <td>TV000005</td>
                        <td>Lê Trọng Đại</td>
                        <td>Nam</td>
                        <td>12/12/1990</td>

                        <td>Thành viên</td>
                        <td>0982909488</td>
                        <td>Đông Hưng, Thái Bình</td>
                    </tr>
                    <tr class="gradeA">
                        <td>TV000006</td>
                        <td>Nguyễn Việt Anh</td>
                        <td>Nam</td>
                        <td>10/09/1982</td>

                        <td>Thành viên</td>
                        <td>0933988492</td>
                        <td>Ân Thi, Hưng Yên</td>
                    </tr>
                    <tr class="gradeA">
                        <td>TV000007</td>
                        <td>Vũ Khắc Tiệp</td>
                        <td>Nam</td>
                        <td>19/03/1984</td>

                        <td>Thành viên</td>
                        <td>0933988492</td>
                        <td>Thanh Trì, Hà Nội</td>
                    </tr>

                    <tr class="gradeA">
                        <td>TV000005</td>
                        <td>Lê Đức Hiếu</td>
                        <td>Nam</td>
                        <td>12/12/1990</td>

                        <td>Thành viên</td>
                        <td>0982909482</td>
                        <td>Đông Hưng, Thái Bình</td>
                    </tr>
                    <tr class="gradeA">
                        <td>TV000005</td>
                        <td>Ngô Minh Thuận</td>
                        <td>Nam</td>
                        <td>12/12/1990</td>

                        <td>Thành viên</td>
                        <td>0982909483</td>
                        <td>Đông Hưng, Thái Bình</td>
                    </tr>
                    <tr class="gradeA">
                        <td>TV000005</td>
                        <td>Tạ Kỳ Anh</td>
                        <td>Nam</td>
                        <td>12/12/1990</td>

                        <td>Thành viên</td>
                        <td>0982909487</td>
                        <td>Đông Hưng, Thái Bình</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>
    <!-- end: page -->
</section>
			</div>
		</section>

@section script{
    <script>
        function template(data) {
            pos = '';
            if (data.PositionID == 0) { pos = "Chủ sở hữu" } else if (data.PositionID == 1) { pos = "Trưởng phòng" } else if (data.PositionID == 2) { pos = "Trưởng phòng dự bị" } else if (data.PositionID == 3) { pos = "TVĐC" } else if (data.PositionID == 4) { pos = "TVTC" } else if (data.PositionID == 5) { pos = "TV300" } else pos = "Thành viên"
            birth = data.Birthday.split('T')[0];
            birthday = birth.substring(8) + '/' + birth.substring(5, 7) + '/' + birth.substring(0, 4)
            gender = ''
            if (data.Gender)
                gender = 'Nam'
            else
                gender = 'Nữ'

            temp = `
    <tr class="gradeA">
                        <td>${data.MemberID}</td>
                                    <td>${data.FullName}</td>
                                    <td>${gender}</td>
                                    <td>${birthday}</td>

                        <td>${pos}</td>
                                    <td>${data.Phone}</td>
                                    <td>${data.Address}</td>
                    </tr>`
            return temp
        }
        function LoadData() {
            $.get(`http://localhost:57133/GetLowerMembers?id=TV000001`).done(
                function (data) {
                    //for (var row of data) {
                    //    $('tbody').append(template(row))
                    //}
                    console.log(data)
                }
            )
        }
        LoadData()
    </script>

    <script src="~/Assets/javascripts/tables/member.with.detail.js"></script>
    <script>
        (function ($) {
            $(function () {
                EditableTable.initialize(5);
            });
        }).apply(this, [jQuery]);
    </script>
}